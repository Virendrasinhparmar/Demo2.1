<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aarav & Kavya | The Union</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Montserrat:wght@300;400&family=Great+Vibes&family=Cinzel:wght@400;500&family=Noto+Serif+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- THEME VARIABLES --- */
        :root {
            /* Day Theme */
            --bg-body: #f7f3ee;
            --bg-gradient-start: #f7f3ee;
            --bg-gradient-end: rgba(242, 222, 222, 0.3);
            --text-main: #3b2c2c;
            --text-muted: rgba(59, 44, 44, 0.7);
            --accent-gold: #d6b37a;
            --highlight-pink: #f2dede;
            
            /* Glass Variables */
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.6);
            --glass-highlight: rgba(255, 255, 255, 0.4);
            --card-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            
            --toran-color-1: #ff9933; 
            --toran-color-2: #ffcc00;
        }

        body.dark-theme {
            /* Night Theme */
            --bg-body: #1a1212;
            --bg-gradient-start: #1a1212;
            --bg-gradient-end: #2c1e1e;
            --text-main: #e6dac8;
            --text-muted: rgba(230, 218, 200, 0.6);
            --accent-gold: #c7a060;
            --highlight-pink: #2c1e1e;
            
            /* Dark Glass */
            --glass-bg: rgba(20, 20, 20, 0.6);
            --glass-border: rgba(199, 160, 96, 0.3);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);

            --toran-color-1: #cc7a00;
            --toran-color-2: #cca300;
        }

        /* --- BASE STYLES & PAPER TEXTURE --- */
        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            scroll-behavior: smooth;
            transition: background-color 0.8s ease, color 0.8s ease;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Hindi Font Support */
        body.lang-hi h1, body.lang-hi h2, body.lang-hi h3, body.lang-hi .editorial-font {
            font-family: 'Noto Serif Devanagari', serif;
        }
        body.lang-hi p, body.lang-hi span, body.lang-hi input, body.lang-hi select, body.lang-hi textarea {
            font-family: 'Noto Serif Devanagari', sans-serif;
        }

        /* Realistic Paper Grain Overlay */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 50;
            mix-blend-mode: multiply;
        }

        h1, h2, h3, h4, .editorial-font {
            font-family: 'Cormorant Garamond', serif;
        }

        /* --- LUXURY GOLD FOIL EFFECT --- */
        .gold-text {
            color: #b38728; /* Fallback color */
            background: linear-gradient(
                to right, 
                #bf953f 0%, 
                #fcf6ba 25%, 
                #b38728 50%, 
                #fbf5b7 75%, 
                #aa771c 100%
            );
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 4s linear infinite;
            position: relative;
        }
        
        @keyframes shine {
            to { background-position: 200% center; }
        }

        /* --- ANIMATIONS --- */
        .fade-up {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease-out, transform 1.2s ease-out;
        }
        .fade-up.visible { opacity: 1; transform: translateY(0); }
        .delay-100 { transition-delay: 0.1s; }
        .delay-200 { transition-delay: 0.2s; }
        .delay-300 { transition-delay: 0.3s; }

        @keyframes ken-burns {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        /* --- HERO SECTION --- */
        .hero-section {
            height: 100vh; /* Fallback */
            height: 100dvh; /* Mobile viewport fix */
            position: relative;
            overflow: hidden;
        }
        .hero-bg {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(26, 18, 18, 0.3), rgba(26, 18, 18, 0.4)), url('1.jpg');
            background-size: cover;
            background-position: center;
            animation: ken-burns 20s ease-out infinite alternate;
            z-index: 0;
        }
        .hero-names {
            font-size: clamp(2.5rem, 12vw, 6rem);
            line-height: 1;
            letter-spacing: -0.02em;
            color: #fff; 
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        /* --- REALISTIC GLASS CARD --- */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-top: 1px solid rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.1), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            position: relative;
            transition: all 0.4s ease;
            z-index: 10;
        }

        .glass-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px -10px rgba(0,0,0,0.15), inset 0 0 0 1px rgba(255, 255, 255, 0.2);
        }

        /* NEW: Glass Form Container (Fixes Grey Box Issue) */
        .glass-form {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            border-radius: 12px;
            padding: 2rem;
            max-width: 32rem;
            margin: 2rem auto;
            transition: background 0.8s ease, border 0.8s ease;
        }

        /* Ornamental Corners */
        .ornamental-corner {
            position: absolute;
            width: 25px;
            height: 25px;
            pointer-events: none;
            border: 2px solid var(--accent-gold);
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        .glass-card:hover .ornamental-corner { opacity: 1; }
        
        .corner-tl { top: 10px; left: 10px; border-right: none; border-bottom: none; border-radius: 4px 0 0 0; }
        .corner-tr { top: 10px; right: 10px; border-left: none; border-bottom: none; border-radius: 0 4px 0 0; }
        .corner-bl { bottom: 10px; left: 10px; border-right: none; border-top: none; border-radius: 0 0 0 4px; }
        .corner-br { bottom: 10px; right: 10px; border-left: none; border-top: none; border-radius: 0 0 4px 0; }

        /* --- DECORATIONS --- */
        .mandala-bg {
            position: absolute;
            top: 50%; left: 50%;
            width: 800px; height: 800px;
            max-width: 150vw;
            opacity: 0.05;
            pointer-events: none;
            z-index: 0;
            animation: spin-slow 60s linear infinite;
        }
        @keyframes spin-slow {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Toran & Bells */
        .toran-container {
            width: 100%; height: 80px;
            position: absolute; top: -40px; left: 0;
            display: flex; justify-content: center;
            overflow: visible; z-index: 20; pointer-events: none;
        }
        .toran-group {
            display: flex; flex-direction: column; align-items: center;
            margin: 0 15px;
            animation: swing 3s ease-in-out infinite alternate;
            transform-origin: top center;
        }
        .toran-group:nth-child(odd) { animation-delay: 0.5s; margin-top: 10px; }
        .toran-flower {
            width: 35px; height: 35px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--toran-color-2) 30%, var(--toran-color-1) 100%);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .toran-bell {
            color: #d6b37a;
            font-size: 1.2rem;
            margin-top: -5px;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
        }

        @media (max-width: 640px) {
            .toran-container { top: -25px; height: 60px; }
            .toran-flower { width: 25px; height: 25px; }
            .toran-bell { font-size: 0.9rem; margin-top: -3px; }
            .toran-group { margin: 0 8px; }
        }

        @keyframes swing {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }

        /* Floral Divider */
        .floral-divider {
            display: flex; align-items: center; justify-content: center;
            margin: 2.5rem 0; opacity: 0.8;
            position: relative; z-index: 10;
        }
        .floral-divider::before, .floral-divider::after {
            content: ''; height: 1px; width: 40px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
            margin: 0 10px;
        }
        @media (min-width: 768px) {
            .floral-divider::before, .floral-divider::after { width: 60px; margin: 0 15px; }
        }
        .lotus-icon {
            color: var(--accent-gold);
            font-size: 1.25rem;
            text-shadow: 0 0 10px rgba(214, 179, 122, 0.4);
        }

        /* --- TIMELINE (CENTERED SPLIT) --- */
        .day-timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 0;
        }
        /* Central Line */
        .day-timeline::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 1px;
            background: var(--accent-gold);
            transform: translateX(-50%);
        }
        .day-event {
            position: relative;
            width: 50%;
            padding: 0 30px;
            box-sizing: border-box;
            margin-bottom: 40px;
        }
        /* Left Side (Odd) */
        .day-event:nth-child(odd) {
            left: 0;
            text-align: right;
        }
        /* Dot on Left item (positioned right) */
        .day-event:nth-child(odd)::after {
            content: '';
            position: absolute;
            top: 6px;
            right: -6px;
            width: 12px;
            height: 12px;
            background: var(--accent-gold);
            border-radius: 50%;
            border: 2px solid var(--bg-body);
            z-index: 10;
        }
        /* Right Side (Even) */
        .day-event:nth-child(even) {
            left: 50%;
            text-align: left;
        }
        /* Dot on Right item (positioned left) */
        .day-event:nth-child(even)::after {
            content: '';
            position: absolute;
            top: 6px;
            left: -6px;
            width: 12px;
            height: 12px;
            background: var(--accent-gold);
            border-radius: 50%;
            border: 2px solid var(--bg-body);
            z-index: 10;
        }
        
        .time-badge {
            display: inline-block;
            background: var(--accent-gold);
            color: #fff;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 20px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        /* Mobile Optimization for Split Timeline */
        @media (max-width: 640px) {
            .day-event { padding: 0 15px; }
            .time-badge { font-size: 0.65rem; padding: 2px 8px; }
            .day-event h4 { font-size: 1rem; line-height: 1.2; }
            .day-event p { font-size: 0.7rem; line-height: 1.3; }
        }

        /* --- GALLERY --- */
        .gallery-grid { column-count: 1; column-gap: 1rem; }
        @media (min-width: 640px) { .gallery-grid { column-count: 2; } }
        @media (min-width: 1024px) { .gallery-grid { column-count: 3; } }
        .gallery-item {
            break-inside: avoid; margin-bottom: 1rem;
            position: relative; cursor: pointer; overflow: hidden;
            border-radius: 4px;
            border: 6px solid #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        @media (min-width: 768px) { .gallery-item { border-width: 8px; } }
        .gallery-item img { width: 100%; height: auto; transition: transform 0.8s ease; }
        .gallery-item:hover img { transform: scale(1.05); }

        /* --- COUNTDOWN TIMER --- */
        .countdown-item {
            display: flex; flex-direction: column; align-items: center;
            margin: 0 10px;
        }
        .countdown-val {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem; line-height: 1;
            color: var(--accent-gold);
            font-weight: 600;
        }
        .countdown-label {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem; text-transform: uppercase;
            letter-spacing: 0.1em; color: var(--text-muted);
            margin-top: 5px;
        }

        /* --- VIRTUAL HALDI --- */
        .haldi-area {
            position: relative;
            cursor: crosshair;
            overflow: hidden;
        }
        .haldi-splash {
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #ffcc00 0%, #ff9933 70%, transparent 100%);
            border-radius: 50% 40% 60% 30% / 30% 60% 40% 50%;
            transform: scale(0);
            pointer-events: none;
            animation: splashAppear 0.4s forwards ease-out;
            opacity: 0.8;
            filter: blur(2px);
        }
        @keyframes splashAppear {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: scale(1.5) rotate(45deg); opacity: 0.8; }
        }

        /* --- BLESSINGS MARQUEE & FORM --- */
        .wishes-container {
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            padding: 2rem 0;
        }
        .wishes-track {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }
        .wish-card {
            display: inline-block;
            width: 300px;
            background: var(--glass-bg);
            backdrop-filter: blur(5px);
            padding: 20px;
            margin: 0 15px;
            border-radius: 8px;
            border: 1px solid var(--accent-gold);
            white-space: normal;
            vertical-align: top;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* --- RSVP PETALS --- */
        .petal {
            position: fixed; top: -10vh;
            background: var(--highlight-pink);
            width: 15px; height: 15px;
            border-radius: 15px 0; opacity: 0.8;
            pointer-events: none; z-index: 9999;
            animation: fall linear forwards;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }

        /* --- FORM --- */
        .custom-input, .custom-select {
            background: transparent; border: none;
            border-bottom: 1px solid var(--accent-gold);
            padding: 12px 0; width: 100%;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem; color: var(--text-main);
            outline: none; transition: all 0.3s;
            border-radius: 0;
        }
        .custom-input::placeholder {
            color: var(--text-muted);
            opacity: 0.8;
        }
        .custom-select {
            cursor: pointer;
            color: var(--text-muted);
        }
        .custom-select option {
            background-color: var(--bg-body);
            color: var(--text-main);
        }
        .custom-input:focus, .custom-select:focus {
            border-bottom: 2px solid var(--text-main);
            background: rgba(255,255,255,0.05);
        }

        /* --- UI CONTROLS --- */
        .ui-controls {
            position: fixed; bottom: 20px; right: 20px; z-index: 60;
            display: flex; gap: 10px;
        }
        .control-btn {
            width: 45px; height: 45px;
            border-radius: 50%;
            background: var(--glass-bg);
            border: 1px solid var(--accent-gold);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; backdrop-filter: blur(5px);
            transition: all 0.3s; color: var(--text-main);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .control-btn:hover { background: var(--bg-body); transform: scale(1.1); }
        
        .rsvp-btn {
            background-color: var(--text-main); color: #fff;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 44, 44, 0.3);
            width: 100%; max-width: 300px;
        }
        .rsvp-btn:hover {
            background-color: var(--accent-gold); color: #3b2c2c;
            transform: translateY(-2px);
        }

        /* Sticky RSVP Button (Mobile Only) */
        .sticky-rsvp {
            position: fixed;
            bottom: 80px;
            right: 20px;
            z-index: 55;
            background: var(--accent-gold);
            color: #3b2c2c;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transform: translateY(100px);
            transition: transform 0.4s ease;
            display: none;
        }
        @media(max-width: 768px) {
            .sticky-rsvp.visible { transform: translateY(0); display: block; }
        }

        /* Music Bars */
        .music-waves span {
            display: inline-block; width: 3px; background: var(--text-main);
            margin: 0 1px; animation: waves 1s infinite ease-in-out;
        }
        .music-paused span { animation-play-state: paused; height: 5px !important; }
        .music-waves span:nth-child(1) { animation-delay: 0.1s; height: 10px; }
        .music-waves span:nth-child(2) { animation-delay: 0.3s; height: 15px; }
        .music-waves span:nth-child(3) { animation-delay: 0.5s; height: 8px; }
        @keyframes waves { 0%, 100% { height: 5px; } 50% { height: 15px; } }

        /* DIYA */
        .diya-container {
            width: 40px; height: 20px;
            background: var(--accent-gold);
            border-radius: 0 0 20px 20px;
            position: relative; margin: 0 auto;
        }
        .flame {
            width: 10px; height: 10px;
            background: #ffcc00;
            border-radius: 50% 0 50% 50%;
            transform: rotate(-45deg);
            position: absolute; top: -12px; left: 50%; margin-left: -5px;
            animation: flicker 0.5s infinite alternate;
            box-shadow: 0 0 10px #ff6600;
        }
        @keyframes flicker {
            0% { transform: rotate(-45deg) scale(1); opacity: 0.9; }
            100% { transform: rotate(-45deg) scale(1.1); opacity: 1; }
        }

        /* --- ADMIN DASHBOARD --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: var(--bg-body);
            color: var(--text-main);
            width: 90%; max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 12px;
            padding: 30px;
            border: 1px solid var(--accent-gold);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .admin-stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        .admin-table th, .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        .admin-table th { background: rgba(214, 179, 122, 0.2); }
        
        /* Mobile Admin Cards */
        @media (max-width: 640px) {
            .admin-table thead { display: none; }
            .admin-table, .admin-table tbody, .admin-table tr, .admin-table td { display: block; width: 100%; }
            .admin-table tr { margin-bottom: 15px; border: 1px solid var(--glass-border); padding: 10px; border-radius: 8px; }
            .admin-table td { text-align: right; padding-left: 50%; position: relative; border-bottom: none; }
            .admin-table td::before { 
                content: attr(data-label); 
                position: absolute; left: 10px; font-weight: bold; text-align: left;
            }
        }

    </style>
    
    <!-- FIREBASE SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, onSnapshot } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';
        import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';

        // Firebase Config
        const firebaseConfig = JSON.parse(__firebase_config);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Sign in anonymously immediately
        signInAnonymously(auth).catch((error) => console.error("Auth Error:", error));

        // --- GLOBAL EXPORTS FOR HTML FUNCTIONS ---
        window.db = db;
        window.appId = appId;
        window.collection = collection;
        window.addDoc = addDoc;
        window.getDocs = getDocs;
        window.query = query;
        window.orderBy = orderBy;
        window.onSnapshot = onSnapshot; // for realtime updates
    </script>
</head>
<body class="day-theme">

    <div class="ui-controls">
        <div class="control-btn" id="langBtn" onclick="toggleLanguage()" title="Toggle Language">
            <span class="text-xs font-serif font-bold">En</span>
        </div>
        <div class="control-btn" id="themeBtn" onclick="toggleTheme()" title="Toggle Theme">
            <i class="fas fa-moon theme-icon" id="themeIcon"></i>
        </div>
        <div class="control-btn" id="musicBtn" onclick="toggleMusic()" title="Play Music">
            <div class="music-waves music-paused" id="musicIcon">
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>

    <!-- Sticky RSVP Button for Mobile -->
    <a href="#rsvp" class="sticky-rsvp">RSVP Now <i class="fas fa-arrow-right ml-1"></i></a>

    <audio id="bgMusic" loop>
        <source src="/Indian 1.wav" type="audio/mpeg">
    </audio>

    <!-- HERO SECTION -->
    <section class="hero-section flex flex-col items-center justify-center text-center px-4">
        <div class="hero-bg"></div>
        <div class="relative z-10 fade-up w-full">
            <div id="welcomeMessage" class="hidden text-[#d6b37a] text-lg md:text-2xl font-serif italic mb-4 tracking-wider gold-text"></div>

            <h1 class="hero-names mb-2 md:mb-4">Aarav <span class="text-3xl align-middle text-pink-200">♥</span> Kavya</h1>
            <p class="text-white/90 text-xs md:text-lg tracking-widest font-light mb-2 font-serif italic px-6" data-translate="hero_invite">
                Together with their families invite you to celebrate their wedding
            </p>
            <p class="hero-date text-white font-semibold text-base md:text-xl mt-4 md:mt-6" data-translate="hero_date">
                December 12, 2026
            </p>
            
            <button onclick="addToCalendar()" class="mt-8 border border-white/40 bg-white/10 backdrop-blur-md text-white px-6 py-2 rounded-full text-xs uppercase tracking-widest hover:bg-white hover:text-[#3b2c2c] transition-all duration-300" data-translate="save_date">
                <i class="far fa-calendar-plus mr-2"></i> Save the Date
            </button>
        </div>
        <div class="absolute bottom-10 left-0 w-full text-center fade-up delay-300 z-10">
            <p class="text-white/70 text-[10px] md:text-xs tracking-widest uppercase mb-2" data-translate="scroll_text">Scroll to begin the story</p>
            <i class="fas fa-chevron-down text-white/50 animate-bounce"></i>
        </div>
    </section>

    <!-- OUR STORY -->
    <section class="py-16 md:py-32 px-4 md:px-6 max-w-6xl mx-auto relative overflow-hidden">
        <div class="timeline-connector"></div>

        <div class="mandala-bg">
            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-theme-main w-full h-full">
                <path d="M100 0 C120 40 160 80 200 100 C160 120 120 160 100 200 C80 160 40 120 0 100 C40 80 80 40 100 0 Z M100 20 C115 50 145 80 180 100 C145 120 115 150 100 180 C85 150 55 120 20 100 C55 80 85 50 100 20 Z" />
                <circle cx="100" cy="100" r="10" />
            </svg>
        </div>

        <div class="text-center mb-16 fade-up relative z-10 opacity-70">
             <div class="text-theme-main text-2xl md:text-3xl mb-4">
                <i class="fas fa-om"></i>
            </div>
            <p class="font-serif italic text-theme-main text-lg leading-relaxed">
                || Mangalam Bhagwan Vishnu, Mangalam Garuda Dhwaja ||<br>
                || Mangalam Pundarikaksha, Mangalaya Tano Hari ||
            </p>
        </div>

        <div class="text-center mb-12 md:mb-16 fade-up relative z-10">
            <span class="text-theme-muted text-xs md:text-sm uppercase tracking-[0.2em] block mb-2" data-translate="story_subtitle">The Journey</span>
            <h2 class="text-4xl md:text-6xl text-theme-main gold-text" data-translate="story_title">Our Story</h2>
        </div>

        <!-- Chapter 1 -->
        <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12 mb-16 md:mb-20 fade-up relative z-10">
            <div class="w-full md:w-1/2">
                <div class="relative p-2 md:p-3 bg-white shadow-xl rotate-1">
                    <img src="4.jpg" alt="Meeting" class="w-full h-[300px] md:h-[400px] object-cover filter sepia-[0.2]">
                </div>
            </div>
            <div class="w-full md:w-1/2 text-center md:text-left px-2 md:px-0">
                <h3 class="text-2xl md:text-3xl italic mb-3 md:mb-4 text-theme-main gold-text" data-translate="story_1_title">The First Glance</h3>
                <p class="text-base md:text-lg leading-relaxed text-theme-muted font-light" data-translate="story_1_text">
                    "Two strangers in a crowded room,<br>
                    one shared smile,<br>
                    and the noise of the world faded away."
                </p>
                <p class="mt-4 text-xs md:text-sm text-gray-500">Mumbai, 2021</p>
            </div>
        </div>

        <div class="floral-divider fade-up"><i class="fas fa-spa lotus-icon"></i></div>

        <!-- Chapter 2 -->
        <div class="flex flex-col md:flex-row-reverse items-center gap-8 md:gap-12 mb-16 md:mb-20 fade-up relative z-10">
            <div class="w-full md:w-1/2">
                <div class="relative p-2 md:p-3 bg-white shadow-xl -rotate-1">
                    <img src="ring.jpg" alt="Date" class="w-full h-[300px] md:h-[400px] object-cover filter sepia-[0.2]">
                </div>
            </div>
            <div class="w-full md:w-1/2 text-center md:text-right px-2 md:px-0">
                <h3 class="text-2xl md:text-3xl italic mb-3 md:mb-4 text-theme-main gold-text" data-translate="story_2_title">The Proposal</h3>
                <p class="text-base md:text-lg leading-relaxed text-theme-muted font-light" data-translate="story_2_text">
                    "Under a canopy of stars,<br>
                    with a trembling hand and a full heart,<br>
                    he asked, and she found her forever."
                </p>
                <p class="mt-4 text-xs md:text-sm text-gray-500">Udaipur, 2025</p>
            </div>
        </div>
    </section>

    <!-- FAMILY CREDITS SECTION -->
    <section class="py-16 bg-theme-gradient relative">
        <div class="max-w-4xl mx-auto text-center px-4 fade-up">
            <h3 class="text-2xl md:text-3xl font-serif text-theme-main mb-8 gold-text" data-translate="blessings_title">With the Blessings of</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
                <div>
                    <p class="text-xs uppercase tracking-widest text-theme-muted mb-2" data-translate="groom_family">Groom's Family</p>
                    <p class="text-xl font-serif text-theme-main" data-translate="groom_parents">Mr. Rajesh & Mrs. Sunita Sharma</p>
                    <p class="text-sm font-light italic text-theme-muted mt-1" data-translate="family_suffix">& Family</p>
                </div>
                <div>
                    <p class="text-xs uppercase tracking-widest text-theme-muted mb-2" data-translate="bride_family">Bride's Family</p>
                    <p class="text-xl font-serif text-theme-main" data-translate="bride_parents">Mr. Vikram & Mrs. Anjali Verma</p>
                    <p class="text-sm font-light italic text-theme-muted mt-1" data-translate="family_suffix">& Family</p>
                </div>
            </div>
        </div>
    </section>

    <!-- QUOTE SECTION -->
    <section class="relative py-24 md:py-32 flex items-center justify-center bg-fixed bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?q=80&w=2070&auto=format&fit=crop');">
        <div class="absolute inset-0 bg-theme-body opacity-80 backdrop-blur-sm transition-colors duration-700" style="background-color: var(--bg-body);"></div>
        <div class="relative z-10 text-center max-w-2xl px-6 fade-up">
            <h2 class="text-3xl md:text-6xl text-theme-main leading-tight font-serif" data-translate="quote">
                “From this day forward, <br>
                <span class="italic gold-text">you shall not walk alone.”</span>
            </h2>
        </div>
    </section>

    <!-- EVENTS SECTION -->
    <section class="py-16 md:py-24 px-4 md:px-6 bg-theme-gradient relative">
        <div class="toran-container">
            <div class="toran-group"><div class="toran-flower"></div><i class="fas fa-bell toran-bell"></i></div>
            <div class="toran-group"><div class="toran-flower"></div></div>
            <div class="toran-group"><div class="toran-flower"></div><i class="fas fa-bell toran-bell"></i></div>
            <div class="toran-group"><div class="toran-flower"></div></div>
            <div class="toran-group"><div class="toran-flower"></div><i class="fas fa-bell toran-bell"></i></div>
            <div class="toran-group"><div class="toran-flower"></div></div>
            <div class="toran-group"><div class="toran-flower"></div><i class="fas fa-bell toran-bell"></i></div>
        </div>

        <div class="max-w-6xl mx-auto relative z-10">
            <div class="text-center mb-12 md:mb-16 fade-up">
                <span class="text-theme-muted text-xs md:text-sm uppercase tracking-[0.2em]" data-translate="celebration_subtitle">The Celebration</span>
                <h2 class="text-4xl md:text-6xl mt-2 text-theme-main gold-text" data-translate="events_title">Events</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                <!-- Haldi Card -->
                <div class="glass-card p-6 md:p-8 text-center fade-up delay-100 flex flex-col items-center">
                    <div class="ornamental-corner corner-tl"></div>
                    <div class="ornamental-corner corner-tr"></div>
                    <div class="ornamental-corner corner-bl"></div>
                    <div class="ornamental-corner corner-br"></div>
                    
                    <div class="w-10 h-10 md:w-12 md:h-12 bg-white/30 rounded-full flex items-center justify-center mb-3 md:mb-4 text-[#d6b37a] shadow-inner">
                        <i class="fas fa-sun text-lg md:text-xl"></i>
                    </div>
                    <h3 class="text-xl md:text-2xl mb-2 text-theme-main font-serif" data-translate="haldi_title">Haldi Ceremony</h3>
                    <p class="text-[10px] md:text-xs font-bold uppercase tracking-widest text-[#d6b37a] mb-2" data-translate="haldi_time">Dec 10 | 10:00 AM</p>
                    <p class="text-theme-muted text-sm italic mb-4 px-2 leading-relaxed" data-translate="haldi_desc">
                        "Purifying the soul with turmeric."
                    </p>
                    <p class="text-theme-muted mb-4 font-light text-[10px] md:text-xs uppercase tracking-wide">The Oberoi Udaivilas</p>
                    <div class="border-t border-[#d6b37a]/30 pt-4 mt-auto w-full flex flex-col items-center">
                        <p class="text-[10px] md:text-xs uppercase tracking-wider text-theme-muted mb-2" data-translate="dress_yellow">Dress Code: Yellow</p>
                        <div class="flex gap-2">
                            <span class="w-4 h-4 rounded-full bg-yellow-400 shadow-sm border border-white/50"></span>
                            <span class="w-4 h-4 rounded-full bg-yellow-200 shadow-sm border border-white/50"></span>
                            <span class="w-4 h-4 rounded-full bg-orange-300 shadow-sm border border-white/50"></span>
                        </div>
                    </div>
                </div>

                <!-- Sangeet Card -->
                <div class="glass-card p-6 md:p-8 text-center fade-up delay-200 flex flex-col items-center">
                    <div class="ornamental-corner corner-tl"></div>
                    <div class="ornamental-corner corner-tr"></div>
                    <div class="ornamental-corner corner-bl"></div>
                    <div class="ornamental-corner corner-br"></div>

                    <div class="w-10 h-10 md:w-12 md:h-12 bg-white/30 rounded-full flex items-center justify-center mb-3 md:mb-4 text-[#d6b37a] shadow-inner">
                        <i class="fas fa-music text-lg md:text-xl"></i>
                    </div>
                    <h3 class="text-xl md:text-2xl mb-2 text-theme-main font-serif" data-translate="sangeet_title">Sangeet Night</h3>
                    <p class="text-[10px] md:text-xs font-bold uppercase tracking-widest text-[#d6b37a] mb-2" data-translate="sangeet_time">Dec 11 | 7:00 PM</p>
                    <p class="text-theme-muted text-sm italic mb-4 px-2 leading-relaxed" data-translate="sangeet_desc">
                        "An evening of rhythm and romance."
                    </p>
                    <p class="text-theme-muted mb-4 font-light text-[10px] md:text-xs uppercase tracking-wide">Grand Ballroom</p>
                    <div class="border-t border-[#d6b37a]/30 pt-4 mt-auto w-full flex flex-col items-center">
                        <p class="text-[10px] md:text-xs uppercase tracking-wider text-theme-muted mb-2" data-translate="dress_glam">Dress Code: Glamorous</p>
                        <div class="flex gap-2">
                            <span class="w-4 h-4 rounded-full bg-purple-900 shadow-sm border border-white/50"></span>
                            <span class="w-4 h-4 rounded-full bg-blue-900 shadow-sm border border-white/50"></span>
                            <span class="w-4 h-4 rounded-full bg-emerald-800 shadow-sm border border-white/50"></span>
                        </div>
                    </div>
                </div>

                <!-- Wedding Card -->
                <div class="glass-card p-6 md:p-8 text-center fade-up delay-300 relative flex flex-col items-center border-[#d6b37a]/50">
                    <div class="ornamental-corner corner-tl"></div>
                    <div class="ornamental-corner corner-tr"></div>
                    <div class="ornamental-corner corner-bl"></div>
                    <div class="ornamental-corner corner-br"></div>

                    <div class="w-10 h-10 md:w-12 md:h-12 bg-[#d6b37a] text-white rounded-full flex items-center justify-center mb-3 md:mb-4 shadow-lg border-2 border-white">
                        <i class="fas fa-ring text-lg md:text-xl"></i>
                    </div>
                    <h3 class="text-2xl md:text-3xl mb-2 font-semibold text-theme-main font-serif gold-text" data-translate="wedding_title">The Wedding</h3>
                    <p class="text-[10px] md:text-xs font-bold uppercase tracking-widest text-[#d6b37a] mb-2" data-translate="wedding_time">Dec 12 | 11:00 AM</p>
                    <p class="text-theme-muted text-sm italic mb-4 px-2 leading-relaxed" data-translate="wedding_desc">
                        "Two souls, one destiny."
                    </p>
                    <p class="text-theme-muted mb-4 font-light text-[10px] md:text-xs uppercase tracking-wide">The Royal Gardens</p>
                    <div class="border-t border-[#d6b37a]/30 pt-4 mt-auto w-full flex flex-col items-center">
                        <p class="text-[10px] md:text-xs uppercase tracking-wider text-theme-muted mb-2" data-translate="dress_traditional">Dress Code: Traditional</p>
                        <div class="flex gap-2">
                            <span class="w-4 h-4 rounded-full bg-red-700 shadow-sm border border-white/50"></span>
                            <span class="w-4 h-4 rounded-full bg-[#d6b37a] shadow-sm border border-white/50"></span>
                            <span class="w-4 h-4 rounded-full bg-pink-100 shadow-sm border border-white/50"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- VIRTUAL HALDI INTERACTION -->
    <section class="py-16 bg-theme-body">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h3 class="text-2xl font-serif text-theme-main mb-2 gold-text" data-translate="virtual_haldi_title">Virtual Haldi</h3>
            <p class="text-theme-muted text-sm mb-8" data-translate="virtual_haldi_desc">Tap the photo to apply Haldi and bless the couple!</p>
            
            <div class="relative inline-block rounded-lg overflow-hidden shadow-2xl cursor-pointer group" onclick="applyHaldi(event)">
                <div class="haldi-area">
                    <img src="Haldi.jpg" alt="Apply Haldi" class="max-h-[400px] w-auto object-cover transition duration-500 group-hover:scale-105">
                    <div id="haldiLayer" class="absolute inset-0 pointer-events-none"></div>
                </div>
                <div class="absolute bottom-4 right-4 bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full text-xs font-bold text-[#d6b37a] shadow-lg pointer-events-none">
                    <i class="fas fa-hand-sparkles mr-2"></i> Tap to Bless
                </div>
            </div>
            
            <button onclick="resetHaldi()" class="block mx-auto mt-6 text-xs uppercase tracking-widest text-theme-muted hover:text-theme-main transition">
                <i class="fas fa-redo mr-1"></i> Reset
            </button>
        </div>
    </section>

    <!-- BIG DAY TIMELINE (ITINERARY) -->
    <section class="py-16 bg-theme-gradient">
        <div class="max-w-2xl mx-auto px-6 fade-up">
            <div class="text-center mb-12">
                <span class="text-theme-muted text-xs md:text-sm uppercase tracking-[0.2em]" data-translate="timeline_subtitle">Dec 12th</span>
                <h2 class="text-3xl md:text-5xl mt-2 text-theme-main gold-text" data-translate="timeline_title">The Big Day</h2>
            </div>

            <div class="day-timeline">
                <div class="day-event fade-up">
                    <span class="time-badge">10:00 AM</span>
                    <h4 class="text-xl font-serif text-theme-main">Safa Bandhai</h4>
                    <p class="text-sm text-theme-muted font-light">Tying of the ceremonial turbans for the groom's side.</p>
                </div>
                <div class="day-event fade-up delay-100">
                    <span class="time-badge">11:30 AM</span>
                    <h4 class="text-xl font-serif text-theme-main">Baraat Assembly</h4>
                    <p class="text-sm text-theme-muted font-light">The groom's grand procession begins at the Main Gate.</p>
                </div>
                <div class="day-event fade-up delay-200">
                    <span class="time-badge">12:30 PM</span>
                    <h4 class="text-xl font-serif text-theme-main">Milni & Varmala</h4>
                    <p class="text-sm text-theme-muted font-light">Welcoming of families and exchange of garlands.</p>
                </div>
                <div class="day-event fade-up delay-300">
                    <span class="time-badge">01:30 PM</span>
                    <h4 class="text-xl font-serif text-theme-main">Pheras</h4>
                    <p class="text-sm text-theme-muted font-light">The sacred wedding ceremony around the holy fire.</p>
                </div>
                <div class="day-event fade-up">
                    <span class="time-badge">03:00 PM</span>
                    <h4 class="text-xl font-serif text-theme-main">Grand Lunch</h4>
                    <p class="text-sm text-theme-muted font-light">A royal feast to celebrate the newlyweds.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- TRAVEL & CONCIERGE -->
    <section class="py-16 bg-theme-body">
        <div class="max-w-6xl mx-auto px-4">
             <div class="text-center mb-12 fade-up">
                <span class="text-theme-muted text-xs md:text-sm uppercase tracking-[0.2em]" data-translate="travel_subtitle">Travel Guide</span>
                <h2 class="text-3xl md:text-5xl mt-2 text-theme-main gold-text" data-translate="destination_title">The Destination</h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Getting There -->
                <div class="glass-card p-8 flex flex-col items-start fade-up">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-10 h-10 bg-theme-main text-[#f7f3ee] rounded-full flex items-center justify-center"><i class="fas fa-plane"></i></div>
                        <h3 class="text-xl font-serif text-theme-main" data-translate="getting_there_title">Getting There</h3>
                    </div>
                    <p class="text-theme-muted font-light leading-relaxed mb-4" data-translate="getting_there_desc">
                        The nearest airport is <strong>Maharana Pratap Airport (UDR)</strong>, located approx. 45 minutes from the venue. 
                        Pre-paid taxis and hotel shuttles are available.
                    </p>
                </div>
                <!-- Accommodation -->
                <div class="glass-card p-8 flex flex-col items-start fade-up delay-100">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-10 h-10 bg-theme-main text-[#f7f3ee] rounded-full flex items-center justify-center"><i class="fas fa-bed"></i></div>
                        <h3 class="text-xl font-serif text-theme-main" data-translate="accommodation_title">Accommodation</h3>
                    </div>
                    <p class="text-theme-muted font-light leading-relaxed mb-4" data-translate="accommodation_desc">
                        We have reserved rooms at <strong>The Oberoi Udaivilas</strong> and <strong>Trident Hotel</strong> for our guests.
                        Please use code <strong class="text-theme-main">AKWED26</strong> when booking.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- VENUE SECTION -->
    <section class="relative h-[50vh] md:h-[80vh] w-full flex items-center justify-center">
        <div class="absolute inset-0 bg-black/40 z-10"></div>
        <img src="udaipur.jpg" class="absolute inset-0 w-full h-full object-cover z-0" alt="Venue">
        <div class="relative z-20 text-center text-white px-4 fade-up">
            <h2 class="text-3xl md:text-7xl mb-2 font-serif">The Oberoi Udaivilas</h2>
            <p class="text-lg md:text-2xl font-light tracking-wide mb-6 md:mb-8">Udaipur, Rajasthan</p>
            <a href="https://www.google.com/maps/search/?api=1&query=The+Oberoi+Udaivilas+Udaipur" target="_blank" rel="noopener noreferrer" 
               class="inline-block border border-white/50 bg-white/10 backdrop-blur-md text-white px-6 md:px-8 py-2 md:py-3 uppercase tracking-widest text-[10px] md:text-sm hover:bg-white hover:text-[#3b2c2c] transition-all duration-300 rounded-sm" data-translate="open_map">
                Open Location Map
            </a>
        </div>
    </section>

    <!-- SONG REQUEST SECTION (INTERACTIVE) -->
    <section class="py-12 bg-theme-gradient/50">
        <div class="max-w-xl mx-auto px-4 text-center fade-up">
            <i class="fas fa-compact-disc text-3xl text-[#d6b37a] mb-4"></i>
            <h3 class="text-2xl font-serif text-theme-main mb-2" data-translate="song_request_title">On The Dance Floor</h3>
            <p class="text-theme-muted text-sm mb-6" data-translate="song_request_subtitle">Help us build the perfect Sangeet playlist!</p>
            <form onsubmit="handleSongRequest(event)" class="flex gap-2">
                <input type="text" placeholder="Song Name / Artist" class="custom-input bg-white/20 px-4" required>
                <button type="submit" class="bg-[#d6b37a] text-[#3b2c2c] px-4 py-2 rounded-sm text-sm font-bold uppercase tracking-wider hover:bg-[#3b2c2c] hover:text-[#d6b37a] transition-all">
                    <i class="fas fa-plus"></i>
                </button>
            </form>
        </div>
    </section>

    <!-- GALLERY -->
    <section class="py-16 md:py-24 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12 md:mb-16 fade-up">
                <span class="text-theme-muted text-xs md:text-sm uppercase tracking-[0.2em]" data-translate="memories_subtitle">Memories</span>
                <h2 class="text-4xl md:text-6xl mt-2 text-theme-main gold-text" data-translate="gallery_title">Captured Moments</h2>
            </div>
            <div class="gallery-grid">
                <div class="gallery-item fade-up"><img src="1.jpg" alt="Couple"></div>
                <div class="gallery-item fade-up delay-100"><img src="couple.jpg" alt="Couple"></div>
                <div class="gallery-item fade-up delay-200"><img src="Haldi.jpg" alt="Hands"></div>
                <div class="gallery-item fade-up"><img src="/4.jpg" alt="Wedding"></div>
                <div class="gallery-item fade-up delay-100"><img src="ring.jpg" alt="Love"></div>
            </div>
        </div>
    </section>

    <!-- BLESSINGS & WISHES SECTION -->
    <section class="py-16 bg-[#f2dede]/30 relative" id="blessings">
        <div class="max-w-4xl mx-auto px-4 text-center mb-12 fade-up">
            <span class="text-theme-muted text-xs md:text-sm uppercase tracking-[0.2em]" data-translate="blessings_subtitle">Your Love</span>
            <h2 class="text-3xl md:text-5xl mt-2 text-theme-main gold-text" data-translate="wishes_title">Blessings</h2>
            
            <!-- Blessing Input Form (UPDATED CLASS: glass-form) -->
            <div class="glass-form">
                <form onsubmit="submitBlessing(event)" class="space-y-4">
                    <input type="text" id="blessingName" placeholder="Your Name" class="custom-input" required>
                    <textarea id="blessingMsg" placeholder="Write your blessing here..." class="custom-input h-20 resize-none" required></textarea>
                    <button type="submit" class="bg-[#d6b37a] text-[#3b2c2c] px-8 py-2 rounded-sm text-sm font-bold uppercase tracking-wider hover:bg-[#3b2c2c] hover:text-[#d6b37a] transition-all">
                        Send Blessing
                    </button>
                </form>
            </div>
        </div>

        <div class="wishes-container">
            <div class="wishes-track" id="wishesTrack">
                <!-- Static Wishes populated below -->
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Wishing you a lifetime of love and happiness!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- The Kapoors</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"May your love grow stronger each and every day."</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Aunt Meera</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"So excited to celebrate with you both in Udaipur!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Rahul & Priya</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Can't wait to see you guys tie the knot!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Sameer</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Congratulations to the beautiful couple!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- The Singh Family</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Wishing you endless joy and love."</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Ananya & Vikram</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Here's to a lifetime of adventures together."</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- The Gupta Family</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Blessings on your new journey."</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Grandma & Grandpa</p>
                </div>
                
                <!-- Duplicates for scrolling effect -->
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Wishing you a lifetime of love and happiness!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- The Kapoors</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"May your love grow stronger each and every day."</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Aunt Meera</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"So excited to celebrate with you both in Udaipur!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Rahul & Priya</p>
                </div>
                <div class="wish-card">
                    <p class="text-theme-main font-serif italic text-lg">"Can't wait to see you guys tie the knot!"</p>
                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- Sameer</p>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP SECTION -->
    <section class="py-16 md:py-24 px-4 relative overflow-hidden" id="rsvp">
         <div class="mandala-bg" style="left: 85%; top: 10%; width: 500px; height: 500px;">
            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-theme-main w-full h-full">
                <path d="M100 0 C120 40 160 80 200 100 C160 120 120 160 100 200 C80 160 40 120 0 100 C40 80 80 40 100 0 Z M100 20 C115 50 145 80 180 100 C145 120 115 150 100 180 C85 150 55 120 20 100 C55 80 85 50 100 20 Z" />
            </svg>
        </div>

        <div class="max-w-xl mx-auto text-center fade-up relative z-10">
            <div class="floral-divider mb-8"><i class="fas fa-envelope-open-text lotus-icon"></i></div>
            <h2 class="text-3xl md:text-5xl mb-3 md:mb-4 text-theme-main gold-text" data-translate="rsvp_title">Kindly confirm your presence</h2>
            <p class="text-theme-muted mb-8 md:mb-12 font-light text-sm md:text-base" data-translate="rsvp_subtitle">We would be honored to have you with us.</p>

            <form id="rsvpForm" class="space-y-6 md:space-y-8 text-left" onsubmit="handleRSVP(event)">
                <input type="text" id="rsvpName" placeholder="Full Name" class="custom-input" required>
                
                <div class="flex flex-col sm:flex-row gap-4 sm:gap-8 justify-center py-2 md:py-4">
                    <label class="flex items-center gap-2 cursor-pointer text-theme-main">
                        <input type="radio" name="attendance" value="attending" class="accent-[#d6b37a]" checked>
                        <span class="font-serif text-lg" data-translate="attending_yes">Joyfully Attending</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer text-theme-main">
                        <input type="radio" name="attendance" value="declined" class="accent-[#d6b37a]">
                        <span class="font-serif text-lg" data-translate="attending_no">Regretfully Decline</span>
                    </label>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="number" id="rsvpGuests" placeholder="Number of Guests" class="custom-input" min="1" max="10">
                    <input type="text" id="rsvpArrival" placeholder="Arrival Date (e.g. 10th Dec)" class="custom-input">
                </div>

                <select id="rsvpDiet" class="custom-select">
                    <option value="" disabled selected>Dietary Preferences</option>
                    <option value="veg">Vegetarian</option>
                    <option value="jain">Jain (No Onion/Garlic)</option>
                    <option value="nonveg">Non-Vegetarian</option>
                    <option value="vegan">Vegan</option>
                </select>

                <input type="text" id="rsvpMsg" placeholder="Message for the couple" class="custom-input">
                
                <div class="text-center mt-8 md:mt-12">
                    <button type="submit" class="rsvp-btn px-12 py-3 rounded-sm font-serif text-lg tracking-wider" data-translate="send_rsvp">
                        Send RSVP
                    </button>
                </div>
            </form>
            
            <div class="mt-16 text-center opacity-70">
                <p class="font-serif italic text-theme-muted text-sm" data-translate="gift_note">"Your presence is the greatest gift. However, if you wish to honor us with a gift,<br>we request no boxed gifts, please."</p>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-12 bg-[#3b2c2c] text-[#f7f3ee] text-center" style="background-color: var(--text-main); color: #f7f3ee;">
        <div class="diya-container mb-6">
            <div class="flame"></div>
        </div>
        <div id="countdown" class="flex justify-center items-center gap-4 mb-6"></div>
        
        <!-- ADMIN LOCK ICON -->
        <div class="mt-8 cursor-pointer opacity-30 hover:opacity-100 transition" onclick="openAdminModal()">
            <i class="fas fa-lock"></i>
        </div>
        
        <p class="font-serif italic text-lg opacity-80 mt-4" data-translate="footer_love">With love and blessings</p>
        <p class="text-xs uppercase tracking-widest mt-4 opacity-40">Designed for the couple</p>
    </footer>

    <!-- ADMIN MODAL -->
    <div id="adminModal" class="modal-overlay">
        <div class="modal-content text-center">
            <h2 class="text-2xl font-serif mb-4">Bride & Groom Access</h2>
            <input type="password" id="adminPass" placeholder="Enter Password" class="custom-input mb-4 text-center">
            <button onclick="loginAdmin()" class="bg-[#d6b37a] text-[#3b2c2c] px-6 py-2 rounded-sm">Login</button>
            <p id="loginError" class="text-red-500 text-sm mt-2 hidden">Incorrect Password</p>
            <button onclick="closeAdminModal()" class="mt-4 text-sm underline text-theme-muted">Close</button>
        </div>
    </div>

    <!-- ADMIN DASHBOARD (Hidden by default) -->
    <div id="adminDashboard" class="modal-overlay">
        <div class="modal-content relative w-full h-full max-h-screen">
            <button onclick="closeDashboard()" class="absolute top-4 right-4 text-2xl"><i class="fas fa-times"></i></button>
            
            <h2 class="text-3xl font-serif gold-text mb-8 text-center">Wedding Planner Dashboard</h2>
            
            <!-- Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="admin-stat-card">
                    <h3 class="text-2xl font-bold" id="totalGuests">0</h3>
                    <p class="text-xs uppercase">Total Guests</p>
                </div>
                <div class="admin-stat-card">
                    <h3 class="text-2xl font-bold" id="totalRSVP">0</h3>
                    <p class="text-xs uppercase">RSVPs Received</p>
                </div>
                <div class="admin-stat-card">
                    <h3 class="text-2xl font-bold" id="vegCount">0</h3>
                    <p class="text-xs uppercase">Vegetarian</p>
                </div>
                <div class="admin-stat-card">
                    <h3 class="text-2xl font-bold" id="jainCount">0</h3>
                    <p class="text-xs uppercase">Jain Meals</p>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex border-b border-gray-300 mb-6">
                <button class="px-6 py-2 border-b-2 border-[#d6b37a] font-bold" onclick="showTab('rsvps')">RSVPs</button>
                <button class="px-6 py-2 text-theme-muted" onclick="showTab('blessings')">Blessings</button>
            </div>

            <!-- RSVP List -->
            <div id="rsvpTab">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Status</th>
                            <th>Guests</th>
                            <th>Diet</th>
                            <th>Arrival</th>
                            <th>Message</th>
                        </tr>
                    </thead>
                    <tbody id="rsvpTableBody">
                        <!-- Populated via JS -->
                    </tbody>
                </table>
            </div>

            <!-- Blessings List -->
            <div id="blessingTab" class="hidden">
                <div id="blessingList" class="grid gap-4">
                    <!-- Populated via JS -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // TRANSLATION DATA
        const translations = {
            en: {
                hero_invite: "Together with their families invite you to celebrate their wedding",
                hero_date: "December 12, 2026",
                save_date: "Save the Date",
                scroll_text: "Scroll to begin the story",
                story_subtitle: "The Journey",
                story_title: "Our Story",
                story_1_title: "The First Glance",
                story_1_text: "\"Two strangers in a crowded room,<br>one shared smile,<br>and the noise of the world faded away.\"",
                story_2_title: "The Proposal",
                story_2_text: "\"Under a canopy of stars,<br>with a trembling hand and a full heart,<br>he asked, and she found her forever.\"",
                blessings_title: "With the Blessings of",
                groom_family: "Groom's Family",
                groom_parents: "Mr. Rajesh & Mrs. Sunita Sharma",
                bride_family: "Bride's Family",
                bride_parents: "Mr. Vikram & Mrs. Anjali Verma",
                family_suffix: "& Family",
                quote: "“From this day forward, <br><span class=\"italic gold-text\">you shall not walk alone.”</span>",
                celebration_subtitle: "The Celebration",
                events_title: "Events",
                haldi_title: "Haldi Ceremony",
                haldi_time: "Dec 10 | 10:00 AM",
                haldi_desc: "\"Purifying the soul with turmeric.\"",
                dress_yellow: "Dress Code: Yellow",
                sangeet_title: "Sangeet Night",
                sangeet_time: "Dec 11 | 7:00 PM",
                sangeet_desc: "\"An evening of rhythm and romance.\"",
                dress_glam: "Dress Code: Glamorous",
                wedding_title: "The Wedding",
                wedding_time: "Dec 12 | 11:00 AM",
                wedding_desc: "\"Two souls, one destiny.\"",
                dress_traditional: "Dress Code: Traditional",
                travel_subtitle: "Travel Guide",
                destination_title: "The Destination",
                getting_there_title: "Getting There",
                getting_there_desc: "The nearest airport is <strong>Maharana Pratap Airport (UDR)</strong>, located approx. 45 minutes from the venue. Pre-paid taxis and hotel shuttles are available.",
                accommodation_title: "Accommodation",
                accommodation_desc: "We have reserved rooms at <strong>The Oberoi Udaivilas</strong> and <strong>Trident Hotel</strong> for our guests. Please use code <strong class=\"text-theme-main\">AKWED26</strong> when booking.",
                open_map: "Open Location Map",
                memories_subtitle: "Memories",
                gallery_title: "Captured Moments",
                wishes_title: "Blessings",
                blessings_subtitle: "Your Love",
                rsvp_title: "Kindly confirm your presence",
                rsvp_subtitle: "We would be honored to have you with us.",
                attending_yes: "Joyfully Attending",
                attending_no: "Regretfully Decline",
                send_rsvp: "Send RSVP",
                gift_note: "\"Your presence is the greatest gift. However, if you wish to honor us with a gift,<br>we request no boxed gifts, please.\"",
                footer_love: "With love and blessings",
                song_request_title: "On The Dance Floor",
                song_request_subtitle: "Help us build the perfect Sangeet playlist!",
                virtual_haldi_title: "Virtual Haldi",
                virtual_haldi_desc: "Tap the photo to apply Haldi and bless the couple!",
                timeline_subtitle: "Dec 12th",
                timeline_title: "The Big Day"
            },
            hi: {
                hero_invite: "अपने परिवारों के साथ आपको अपने विवाह उत्सव में आमंत्रित करते हैं",
                hero_date: "१२ दिसंबर, २०२६",
                save_date: "तारीख़ याद रखें",
                scroll_text: "कहानी शुरू करने के लिए स्क्रॉल करें",
                story_subtitle: "यात्रा",
                story_title: "हमारी कहानी",
                story_1_title: "पहली नज़र",
                story_1_text: "\"भीड़भाड़ वाले कमरे में दो अजनबी,<br>एक साझा मुस्कान,<br>और दुनिया का शोर फीका पड़ गया।\"",
                story_2_title: "प्रस्ताव",
                story_2_text: "\"तारों की छांव में,<br>कांपते हाथों और भरे दिल के साथ,<br>उसने पूछा, और उसे उसका हमसफ़र मिल गया।\"",
                blessings_title: "आशीर्वाद के साथ",
                groom_family: "वर पक्ष",
                groom_parents: "श्री राजेश एवं श्रीमती सुनीता शर्मा",
                bride_family: "वधु पक्ष",
                bride_parents: "श्री विक्रम एवं श्रीमती अंजलि वर्मा",
                family_suffix: "एवं परिवार",
                quote: "“आज से, <br><span class=\"italic gold-text\">तुम अकेले नहीं चलोगे।”</span>",
                celebration_subtitle: "उत्सव",
                events_title: "कार्यक्रम",
                haldi_title: "हल्दी समारोह",
                haldi_time: "१० दिसंबर | सुबह १०:००",
                haldi_desc: "\"हल्दी से आत्मा की शुद्धि।\"",
                dress_yellow: "परिधान: पीला",
                sangeet_title: "संगीत संध्या",
                sangeet_time: "११ दिसंबर | शाम ७:००",
                sangeet_desc: "\"लय और रोमांस की एक शाम।\"",
                dress_glam: "परिधान: ग्लैमरस",
                wedding_title: "शुभ विवाह",
                wedding_time: "१२ दिसंबर | सुबह ११:००",
                wedding_desc: "\"दो आत्माएं, एक नियति।\"",
                dress_traditional: "परिधान: पारंपरिक",
                travel_subtitle: "यात्रा गाइड",
                destination_title: "गंतव्य",
                getting_there_title: "कैसे पहुँचें",
                getting_there_desc: "निकटतम हवाई अड्डा <strong>महाराणा प्रताप हवाई अड्डा (UDR)</strong> है, जो स्थल से लगभग ४५ मिनट की दूरी पर है। प्रीपेड टैक्सी उपलब्ध हैं।",
                accommodation_title: "आवास",
                accommodation_desc: "हमने अपने मेहमानों के लिए <strong>द ओबेरॉय उदयविलास</strong> और <strong>ट्राइडेंट होटल</strong> में कमरे आरक्षित किए हैं। बुकिंग करते समय कोड <strong class=\"text-theme-main\">AKWED26</strong> का उपयोग करें।",
                open_map: "लोकेशन मैप खोलें",
                memories_subtitle: "यादें",
                gallery_title: "सुनहरे पल",
                wishes_title: "शुभकामनाएं",
                blessings_subtitle: "आपका स्नेह",
                rsvp_title: "कृपया अपनी उपस्थिति की पुष्टि करें",
                rsvp_subtitle: "आपकी उपस्थिति हमारे लिए सम्मान की बात होगी।",
                attending_yes: "खुशी से उपस्थित रहेंगे",
                attending_no: "क्षमा करें, उपस्थित नहीं हो सकेंगे",
                send_rsvp: "आरएसवीपी भेजें",
                gift_note: "\"आपकी उपस्थिति ही सबसे बड़ा उपहार है। फिर भी, यदि आप उपहार देना चाहते हैं,<br>तो कृपया नकद उपहार ही दें।\"",
                footer_love: "प्यार और आशीर्वाद के साथ",
                song_request_title: "डांस फ्लोर पर",
                song_request_subtitle: "संगीत के लिए अपने पसंदीदा गाने सुझाएं!",
                virtual_haldi_title: "वर्चुअल हल्दी",
                virtual_haldi_desc: "हल्दी लगाने और आशीर्वाद देने के लिए फोटो पर टैप करें!",
                timeline_subtitle: "१२ दिसंबर",
                timeline_title: "विवाह का दिन"
            }
        };

        let currentLang = 'en';

        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));
            
            startCountdown();
            checkPersonalization();
            checkScrollForSticky();
            
            // Load Blessings for Marquee
            loadPublicBlessings();

            const toran = document.querySelector('.toran-container');
            if(window.innerWidth > 768 && toran) {
                // Add logic if needed for extra flowers
            }
        });

        // --- PUBLIC DATA LOADING ---
        async function loadPublicBlessings() {
            try {
                if(!window.db) return;
                const q = window.query(window.collection(window.db, 'artifacts', window.appId, 'public', 'data', 'blessings'), window.orderBy('timestamp', 'desc'));
                window.onSnapshot(q, (snapshot) => {
                    const track = document.getElementById('wishesTrack');
                    // Keep initial static one or clear it? Let's clear and re-add static + dynamic
                    // For demo, just prepend dynamic ones
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === "added") {
                            const data = change.doc.data();
                            const cardHTML = `
                                <div class="wish-card">
                                    <p class="text-theme-main font-serif italic text-lg">"${data.message}"</p>
                                    <p class="text-xs text-theme-muted mt-2 uppercase tracking-wide">- ${data.name}</p>
                                </div>
                            `;
                            track.insertAdjacentHTML('afterbegin', cardHTML);
                        }
                    });
                }, (error) => console.log("Error loading blessings:", error));
            } catch(e) { console.error(e); }
        }

        // --- ADMIN FUNCTIONS ---
        function openAdminModal() {
            document.getElementById('adminModal').style.display = 'flex';
        }
        function closeAdminModal() {
            document.getElementById('adminModal').style.display = 'none';
        }
        
        function loginAdmin() {
            const pass = document.getElementById('adminPass').value;
            if (pass === '121226') {
                closeAdminModal();
                openDashboard();
            } else {
                document.getElementById('loginError').classList.remove('hidden');
            }
        }

        function openDashboard() {
            document.getElementById('adminDashboard').style.display = 'flex';
            loadAdminData();
        }
        function closeDashboard() {
            document.getElementById('adminDashboard').style.display = 'none';
        }

        function showTab(tabName) {
            if (tabName === 'rsvps') {
                document.getElementById('rsvpTab').classList.remove('hidden');
                document.getElementById('blessingTab').classList.add('hidden');
            } else {
                document.getElementById('rsvpTab').classList.add('hidden');
                document.getElementById('blessingTab').classList.remove('hidden');
            }
        }

        async function loadAdminData() {
            if(!window.db) return;
            
            // Fetch RSVPs
            const rsvpRef = window.collection(window.db, 'artifacts', window.appId, 'public', 'data', 'rsvps');
            const rsvpSnapshot = await window.getDocs(rsvpRef);
            
            let totalGuests = 0;
            let totalRSVP = 0;
            let veg = 0;
            let jain = 0;
            let tbody = document.getElementById('rsvpTableBody');
            tbody.innerHTML = '';

            rsvpSnapshot.forEach(doc => {
                const data = doc.data();
                totalRSVP++;
                const guests = parseInt(data.guests || 0);
                totalGuests += guests;
                
                if (data.diet === 'veg' || data.diet === 'vegan') veg += guests;
                if (data.diet === 'jain') jain += guests;

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td data-label="Name" class="font-bold">${data.name}</td>
                    <td data-label="Status">${data.attendance === 'attending' ? '<span class="text-green-600">Attending</span>' : '<span class="text-red-500">Declined</span>'}</td>
                    <td data-label="Guests">${data.guests}</td>
                    <td data-label="Diet">${data.diet || '-'}</td>
                    <td data-label="Arrival">${data.arrival || '-'}</td>
                    <td data-label="Message" class="text-xs italic">${data.message || ''}</td>
                `;
                tbody.appendChild(tr);
            });

            document.getElementById('totalGuests').innerText = totalGuests;
            document.getElementById('totalRSVP').innerText = totalRSVP;
            document.getElementById('vegCount').innerText = veg;
            document.getElementById('jainCount').innerText = jain;

            // Fetch Blessings
            const blessingRef = window.collection(window.db, 'artifacts', window.appId, 'public', 'data', 'blessings');
            const blessingSnapshot = await window.getDocs(blessingRef);
            const blessingList = document.getElementById('blessingList');
            blessingList.innerHTML = '';
            
            blessingSnapshot.forEach(doc => {
                const data = doc.data();
                const div = document.createElement('div');
                div.className = 'bg-white/50 p-4 rounded border border-gray-200';
                div.innerHTML = `<p class="font-bold text-sm">${data.name}</p><p class="italic">"${data.message}"</p>`;
                blessingList.appendChild(div);
            });
        }

        // --- STANDARD FUNCTIONS ---
        
        function checkScrollForSticky() {
            window.addEventListener('scroll', () => {
                const rsvpSection = document.getElementById('rsvp');
                const stickyBtn = document.querySelector('.sticky-rsvp');
                const heroHeight = window.innerHeight;
                const rsvpPosition = rsvpSection.getBoundingClientRect().top;

                if (window.scrollY > heroHeight && rsvpPosition > window.innerHeight) {
                    stickyBtn.classList.add('visible');
                } else {
                    stickyBtn.classList.remove('visible');
                }
            });
        }

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'hi' : 'en';
            const btn = document.querySelector('#langBtn span');
            btn.innerText = currentLang === 'en' ? 'En' : 'हि';
            
            if(currentLang === 'hi') {
                document.body.classList.add('lang-hi');
            } else {
                document.body.classList.remove('lang-hi');
            }

            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[currentLang][key]) {
                    el.innerHTML = translations[currentLang][key];
                }
            });
        }

        function checkPersonalization() {
            const urlParams = new URLSearchParams(window.location.search);
            const guest = urlParams.get('guest');
            const welcomeDiv = document.getElementById('welcomeMessage');
            
            if(guest) {
                const cleanName = guest.replace(/[_-]/g, ' ');
                welcomeDiv.innerText = `Welcome, ${cleanName}`;
                welcomeDiv.classList.remove('hidden');
                welcomeDiv.classList.add('fade-up', 'visible');
            }
        }

        function toggleMusic() {
            const audio = document.getElementById('bgMusic');
            const icon = document.getElementById('musicIcon');
            if (audio.paused) {
                audio.play(); icon.classList.remove('music-paused');
            } else {
                audio.pause(); icon.classList.add('music-paused');
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const icon = document.getElementById('themeIcon');
            if (document.body.classList.contains('dark-theme')) {
                icon.classList.remove('fa-moon'); icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun'); icon.classList.add('fa-moon');
            }
        }

        async function handleRSVP(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Sending...";
            btn.disabled = true;

            const formData = {
                name: document.getElementById('rsvpName').value,
                attendance: document.querySelector('input[name="attendance"]:checked').value,
                guests: document.getElementById('rsvpGuests').value,
                arrival: document.getElementById('rsvpArrival').value,
                diet: document.getElementById('rsvpDiet').value,
                message: document.getElementById('rsvpMsg').value,
                timestamp: new Date()
            };

            try {
                if(window.addDoc && window.db) {
                    await window.addDoc(window.collection(window.db, 'artifacts', window.appId, 'public', 'data', 'rsvps'), formData);
                }
                
                const msg = currentLang === 'en' ? "Sent with Love" : "प्यार के साथ भेजा गया";
                btn.innerText = msg;
                for(let i = 0; i < 30; i++) setTimeout(createPetal, i * 100);
                const alertMsg = currentLang === 'en' ? "Thank you for your RSVP!" : "आपकी प्रतिक्रिया के लिए धन्यवाद!";
                setTimeout(() => alert(alertMsg), 1000);
            } catch (error) {
                console.error("Error submitting RSVP: ", error);
                alert("There was an error. Please try again.");
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }

        function handleSongRequest(e) {
            e.preventDefault();
            const input = e.target.querySelector('input');
            const btn = e.target.querySelector('button');
            input.value = "Added! Thank you.";
            btn.classList.add('opacity-50');
            setTimeout(() => { input.value = ""; btn.classList.remove('opacity-50'); }, 2000);
        }

        function applyHaldi(event) {
            const rect = event.currentTarget.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            const splash = document.createElement('div');
            splash.classList.add('haldi-splash');
            const randomRot = Math.random() * 360;
            const randomScale = 0.8 + Math.random() * 0.7;
            
            splash.style.left = (x - 25) + 'px';
            splash.style.top = (y - 25) + 'px';
            splash.style.transform = `scale(${randomScale}) rotate(${randomRot}deg)`;
            
            document.getElementById('haldiLayer').appendChild(splash);
        }

        function resetHaldi() {
            document.getElementById('haldiLayer').innerHTML = '';
        }

        async function submitBlessing(e) {
            e.preventDefault();
            const name = document.getElementById('blessingName').value;
            const msg = document.getElementById('blessingMsg').value;
            
            const data = {
                name: name,
                message: msg,
                timestamp: new Date()
            };

            try {
                if(window.addDoc && window.db) {
                    await window.addDoc(window.collection(window.db, 'artifacts', window.appId, 'public', 'data', 'blessings'), data);
                }
                e.target.reset();
                const alertMsg = currentLang === 'en' ? "Thank you for your blessing!" : "आपके आशीर्वाद के लिए धन्यवाद!";
                alert(alertMsg);
            } catch (error) {
                console.error("Error adding blessing: ", error);
            }
        }

        function createPetal() {
            const petal = document.createElement('div');
            petal.classList.add('petal');
            petal.style.left = Math.random() * window.innerWidth + 'px';
            const duration = Math.random() * 3 + 2;
            petal.style.animationDuration = duration + 's';
            document.body.appendChild(petal);
            setTimeout(() => petal.remove(), duration * 1000);
        }

        function startCountdown() {
            const weddingDate = new Date("Dec 12, 2026 11:00:00").getTime();
            const countdownContainer = document.getElementById("countdown");

            setInterval(() => {
                const now = new Date().getTime();
                const distance = weddingDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const labels = currentLang === 'en' 
                    ? ['Days', 'Hrs', 'Mins', 'Secs'] 
                    : ['दिन', 'घंटे', 'मिनट', 'सेकंड'];

                countdownContainer.innerHTML = `
                    <div class="countdown-item"><span class="countdown-val text-xl md:text-2xl">${days}</span><span class="countdown-label text-[0.6rem]">${labels[0]}</span></div>
                    <div class="countdown-item"><span class="countdown-val text-xl md:text-2xl">${hours}</span><span class="countdown-label text-[0.6rem]">${labels[1]}</span></div>
                    <div class="countdown-item"><span class="countdown-val text-xl md:text-2xl">${minutes}</span><span class="countdown-label text-[0.6rem]">${labels[2]}</span></div>
                    <div class="countdown-item"><span class="countdown-val text-xl md:text-2xl">${seconds}</span><span class="countdown-label text-[0.6rem]">${labels[3]}</span></div>
                `;
            }, 1000);
        }

        function addToCalendar() {
            const eventDetails = {
                text: "Aarav & Kavya Wedding",
                dates: "20261212T053000Z/20261212T173000Z", 
                details: "Join us to celebrate the union of Aarav and Kavya at The Oberoi Udaivilas, Udaipur.",
                location: "The Oberoi Udaivilas, Udaipur, Rajasthan"
            };
            const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventDetails.text)}&dates=${eventDetails.dates}&details=${encodeURIComponent(eventDetails.details)}&location=${encodeURIComponent(eventDetails.location)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
